var captchaRes="";var sibVerifyCallback=function(s){captchaRes=s;var e=sessionStorage.getItem("formIdRecapcha");if(captchaRes){var i=0;jQuery.each(jQuery(e).find("input[required=required]"),function(){if(jQuery(this).val().trim()==""||jQuery(this).attr("type")=="checkbox"&&jQuery(this).prop("checked")==false){i++;var s=jQuery(this).closest("form");s.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.requiredField+"</p>").show();return}})}if(i==0){jQuery(e).trigger("submit")}};jQuery(document).ready(function(){jQuery(".sib_signup_form").find("input[required=required]").on("invalid",function(){if(jQuery(this).val().trim()==""){var s=jQuery(this).closest("form").find('input[name="sib_form_alert_notice"]').val();this.setCustomValidity(s)}else{this.setCustomValidity("")}});jQuery(document).on("submit","form",function(s){if(!jQuery(this).hasClass("sib_signup_form")){var e=jQuery(this).find("input[type=email]").val();var i=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(typeof sendinblue!="undefined"&&e!=null&&i.test(e)){var t=jQuery("input[type!=password]",this).serializeObject();sendinblue.identify(e,t)}}else{s.preventDefault();var u=jQuery(this).closest("form");jQuery.each(u.find(".sib-sms"),function(){var s=jQuery(this).val();var e=jQuery(this).closest(".sib-sms-field").find('input[name="sib_SMS_prefix"]').val();if(s==e&&!jQuery(this).prop("required")){jQuery(this).val("")}});var a=[];var r=0;var n=u.find(jQuery(".sib-multi-lists"));if(n!=undefined&&n.data("require")=="required"){if(n.find("input:checked").length==0){r++;n.addClass("sib_error")}}if(r>0){u.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.requiredField+"</p>").show();return}r=0;jQuery.each(u.find('input[type="email"]'),function(){var s=/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/i;if(!s.test(jQuery(this).val())){r++}});if(r>0){u.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.invalidMail+"</p>").show();return}r=0;jQuery.each(u.find(".sib-sms"),function(){var s=jQuery(this).val();if(f(s)==false&&s!=""){r++}});if(r>0){u.find(".sib_msg_disp").html('<p class="sib-alert-message sib-alert-message-warning ">'+sibErrMsg.invalidSMSFormat+"</p>").show();return}u.find(".sib_loader").show();jQuery(".sib_msg_disp").hide();var t=u.serializeArray();if(captchaRes!=""){t.push({name:"g-recaptcha-response",value:captchaRes})}captchaRes="";if(jQuery(".sib-multi-lists").length){var l=[];jQuery(".sib-interesting-lists").each(function(){t.push({name:"interestingLists[]",value:jQuery(this).val()})})}var c=u.attr("action");u.addClass("sib_processing");t.push({name:"security",value:ajax_sib_front_object.ajax_nonce});jQuery.ajax({url:c,type:"POST",dataType:"json",data:t,success:function(s,e,i){jQuery(".sib_loader").hide();if(jQuery(".sib-multi-lists").length){jQuery(".sib-multi-lists").removeClass("sib_error")}if(s.status==="success"||s.status==="update"){var t='<p class="sib-alert-message sib-alert-message-success ">'+s.msg.successMsg+"</p>";u.find(".sib_msg_disp").html(t).show()}else if(s.status==="failure"){var t='<p class="sib-alert-message sib-alert-message-error ">'+s.msg.errorMsg+"</p>";u.find(".sib_msg_disp").html(t).show()}else if(s.status==="already_exist"){var t='<p class="sib-alert-message sib-alert-message-warning ">'+s.msg.existMsg+"</p>";u.find(".sib_msg_disp").html(t).show()}else if(s.status==="invalid"){var t='<p class="sib-alert-message sib-alert-message-error ">'+s.msg.invalidMsg+"</p>";u.find(".sib_msg_disp").html(t).show()}else if(s.status==="gcaptchaEmpty"){var t='<p class="sib-alert-message sib-alert-message-error ">'+s.msg+"</p>";u.find(".sib_msg_disp").html(t).show()}else if(s.status==="gcaptchaFail"){var t='<p class="sib-alert-message sib-alert-message-error ">'+s.msg+"</p>";u.find(".sib_msg_disp").html(t).show()}u[0].reset();if(s.redirect&&(s.status==="success"||s.status==="update")){window.location.href=s.redirect}var a=u.find(".sib-cflags").data("dial-code");if(a){u.find(".sib-sms").val("+"+a);u.find('input[name="sib_SMS_prefix"]').val("+"+a)}if(typeof sendinblue!="undefined"){var r=u.find("input[name=email]").val();var n=u.serializeObject();if(s.status==="success"||s.status==="update"||s.status==="already_exist"){sendinblue.identify(r,n)}}jQuery(".sib-alert-message").delay(2e3).hide("slow");u.removeClass("sib_processing");if(typeof grecaptcha!="undefined"){grecaptcha.reset(gCaptchaSibWidget)}},error:function(s,e,i){u.find(".sib_msg_disp").html(s).show();if(typeof grecaptcha!="undefined"){grecaptcha.reset(gCaptchaSibWidget)}}})}});jQuery(".sib-country-block").on("click",function(){jQuery(".sib-country-list").toggle()});if(jQuery(".sib-country-list").length>0){jQuery(".sib-country-list").ready(function(){var s={action:"sib_get_country_prefix",security:ajax_sib_front_object.ajax_nonce};jQuery.post(ajax_sib_front_object.ajax_url,s,function(s){jQuery(".sib-country-list").html(s)})})}jQuery("body").on("click",function(s){if(jQuery(".sib-sms-field .sib-country-list").length>0&&!jQuery(".sib-sms-field .sib-country-list").is(s.target)&&jQuery(".sib-sms-field .sib-country-list").has(s.target).length===0&&jQuery(".sib-sms-field .sib-country-block").has(s.target).length===0){jQuery(".sib-sms-field .sib-country-list").hide()}});jQuery(".sib-country-list").on("click","li",function(){var s=jQuery(this).data("country-code").toLowerCase();var e=jQuery(this).data("dial-code");jQuery(this).closest(".sib-sms-field").find(".sib-sms").val("+"+e);jQuery(this).closest(".sib-sms-field").find('input[name="sib_SMS_prefix"]').val("+"+e);jQuery(this).closest(".sib-sms-field").find(".sib-cflags").css("background-image","url("+ajax_sib_front_object.flag_url+s+".png)");jQuery(this).closest(".sib-sms-field").find(".sib-cflags").data("dial-code",e);jQuery(this).closest(".sib-country-list").hide()});jQuery(".sib-sms").on("keypress",function(s){e(s,"sms")});jQuery(".sib-date").on("keypress",function(s){e(s,"date")});function f(s){s=s.replace(/\b(0(?!\b))+/g,"");var e=s.replace(/( |\(|\)|\.|\-)/g,"");if(e.length>19||e.length<6||e.charAt(0)!="+"){return false}return true}function e(s,e){var i=s||window.event;var t=i.charCode||i.which;t=String.fromCharCode(t);var a=/[ +0-9()-]/;var r=0;if(e=="date"){a=/[ 0-9-/]/}if(!a.test(t)){i.returnValue=false;t=i.keyCode;if(i.preventDefault&&t!=9&&t!=8)i.preventDefault()}}});jQuery.fn.serializeObject=function(){var s={};var e=this.serializeArray();jQuery.each(e,function(){if(this.name=="sib_form_action"||this.name=="sib_form_id"||this.name=="email")return true;if(s[this.name]!==undefined){if(!s[this.name].push){s[this.name]=[s[this.name]]}s[this.name].push(this.value||"")}else{s[this.name]=this.value||""}});return s};jQuery(document).ready(function(){jQuery(".sib-default-btn").on("click",function(){var s=jQuery(this).closest(".sib_signup_form");sessionStorage.setItem("formIdRecapcha","#"+jQuery(s).attr("id"))})});